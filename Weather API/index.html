<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>

  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.3.3/axios.min.js"
    integrity="sha512-wS6VWtjvRcylhyoArkahZUkzZFeKB7ch/MHukprGSh1XIidNvHG1rxPhyFnL73M0FC1YXPIXLRDAoOyRJNni/g=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  ></script>

  <body>
    <div id="box">
      <span id="city"></span>, <span id="region"></span>,
      <span id="country"></span>
      <h2 id="weather">weather :</h2>
      <h4 id="date">last_updated :</h4>
    </div>

    <script>
      let cityName = prompt('Enter city');

      axios
        .get(
          'http://api.weatherapi.com/v1/current.json?key=24df5fcf9b6c4eaebb770740222103&q=' +
            cityName +
            '&aqi=no'
        )
        .then(function (resp) {
          console.log(resp.data.current.last_updated);

          let img = document.createElement('img');
          img.src = 'https:' + resp.data.current.condition.icon;

          city.innerHTML = resp.data.location.name;

          region.innerHTML = resp.data.location.region;

          country.innerHTML = resp.data.location.country;

          weather.innerHTML += resp.data.current.condition.text;

          date.innerHTML += resp.data.current.last_updated;

          box.appendChild(img);
        });

      downlaodImg()
        .then((result) => {
          console.log(result);
        })
        .catch((result) => {
          console.log(result);
        });

      function downlaodImg() {
        return new Promise(function (success, fail) {
          setTimeout(() => {
            // success("downlaod file")
            fail('downlaod file error');
          }, 4000);
        });
      }
    </script>
  </body>
</html>
